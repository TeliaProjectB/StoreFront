var prettyFiles=function(){var y=function(){return{init:function(r,n){function l(c){c.preventDefault()}function d(c){var a=document.createElement("div");a.className="fileExplorerMiniMenu editFolderItem";c.appendChild(a)}this.createFolder=function(c){var a=document.createElement("div");a.addEventListener("contextmenu",l);var b=document.createElement("div");b.name="flexContainer";b.className="fileExplorerItem";var k=document.createElement("div");k.className="fileExplorerImagePreview fileExplorerFolderClosed fileExplorerContainBack";
b.appendChild(k);k=document.createElement("span");k.className="fileExplorerSpan";k.innerHTML=c.name;b.appendChild(k);n.params.disableInteraction||d(b);a.appendChild(b);c.elemContainer.style.display="none";c.elemContainer.style.marginLeft="16px";a.appendChild(c.elemContainer);return a};this.createFile=function(c){var a=document.createElement("div");a.className="fileExplorerItem";a.addEventListener("contextmenu",l);var b=document.createElement("div");b.removeAttribute("style");b.className="fileExplorerImagePreview fileExplorerContainBack";
void 0!==c.image&&""!==c.image.replace(/ /g,"")?b.style.backgroundImage="url('"+c.image+"')":b.className+=" fileExplorerFile";a.appendChild(b);b=document.createElement("span");b.className="fileExplorerSpan";b.innerHTML=c.name;a.appendChild(b);n.params.disableInteraction||d(a);return a}}}}();var x=function(){return{init:function(r,n,l,d){function c(a,c,d){var b="folder"==a.type?l.namesOfFolders:l.namesOfFiles;for(var f,h=0;h<b.length;h++)if(b[h]==a.name){f=a.id;b.splice(h,1);break}if(d)n.onDeleteFile(a.name,
a.id);for(h=0;h<l.sharedResourceFolderJs.length;h++)d=l.sharedResourceFolderJs[h].getHashes()[f].element,d.parentElement.removeChild(d);for(h=0;h<c.content.length;h++)if(c.content[h].id==a.id){c.content.splice(h,1);break}c=c.elemContainer.children;for(h=0;h<c.length;h++)if(c[h]==a.element){c[h].parentElement.removeChild(c[h]);break}}function a(b,d){for(var k=b.selectedItem.name,e=0;e<b.selectedItem.content.length;e++)"folder"==b.selectedItem.content[e].type?a(b.selectedItem.content[e],d):c(b.selectedItem.content[e],
b.selectedItem.content[e].parent,d);for(e=0;e<b.selectedItem.parent.content.length;e++)"folder"==b.selectedItem.parent.content[e].type&&b.selectedItem.parent.content[e].name==b.selectedItem.name&&b.selectedItem.parent.content.splice(e,1);for(e=0;e<l.namesOfFolders.length;e++)l.namesOfFolders[e]==k&&l.namesOfFolders.splice(e,1)}this["delete"]=function(b){void 0!=b.selectedItem&&void 0==b.selectedItem.root&&("folder"==b.selectedItem.type?r.confirm("Delete",'Are you sure you want to delete the folder "'+
b.selectedItem.name+"\" and all it's content?",function(k){if(k){b.hashedEntries[b.selectedItem.id]=void 0;a(b,!0);if(void 0!=b.selectedItem.copyAssociates)for(k=0;k<b.selectedItem.copyAssociates.length;k++)b.selectedItem.copyAssociates[k].element.parentElement.removeChild(b.selectedItem.copyAssociates[k].element);c(b.selectedItem,b.selectedItem.parent,!0);b.selectedItem=d}}):r.confirm("Delete",'Are you sure you want to delete the file "'+b.selectedItem.name+'"?',function(a){a&&(b.hashedEntries[b.selectedItem.id]=
void 0,c(b.selectedItem,b.selectedItem.parent,!0),b.selectedItem=d)}))}}}}();var w=function(){return{init:function(r){function n(a,b){a.element.parentElement.removeChild(a.element);a.parent.content.splice(a.parent.content.indexOf(a),1);a.parent=void 0==b.content?b.parent:b;a.parent.elemContainer.appendChild(a.element);a.parent.content.push(a)}function l(a){for(var b=a.element.parentElement,d=b.children,m=0,e=0;e<d.length;e++)if(d[e]==a.element){m=e-1;0>m&&(m=0);break}a.element.parentElement.removeChild(a.element);
b.insertBefore(a.element,d[m]);c(a.parent.content,a,-1)}function d(a){for(var b=a.element.parentElement,d=b.children,m=0,e=0;e<d.length;e++)if(d[e]==a.element){m=e+1;m>d.length-1&&(m=d.length-1);break}a.element.parentElement.removeChild(a.element);b.insertBefore(a.element,d[m]);c(a.parent.content,a,1)}this.moveItem=function(a,b,c){n(a,b);for(var d=0;d<c.sharedResourceFolderJs.length;d++){var e=c.sharedResourceFolderJs[d].getHashes()[b.id];void 0==e&&(e=c.sharedResourceFolderJs[d].getRoot());n(c.sharedResourceFolderJs[d].getHashes()[a.id],
e)}};this.moveItemUp=function(a){l(a);for(var b=0;b<r.sharedResourceFolderJs.length;b++)l(r.sharedResourceFolderJs[b].getHashes()[a.id])};this.moveItemDown=function(a){d(a);for(var b=0;b<r.sharedResourceFolderJs.length;b++)d(r.sharedResourceFolderJs[b].getHashes()[a.id])};var c=function(a,b,c){b=a.indexOf(b);c=b+c;0>c||c==a.length||(c=[b,c].sort(),a.splice(c[0],2,a[c[1]],a[c[0]]))}}}}();x=function(r,n){return{init:function(l,d,c,a){function b(){t=!0;g.element.getElementsByClassName("editFolderItem")[0].style.webkitFilter=
"none";g.element.getElementsByClassName("editFolderItem")[0].style.filter="none";g.element.getElementsByClassName("editFolderItem")[0].appendChild(q);for(var a=0;a<q.children.length;a++)q.children[a].className="fileExplorerMenuEntry fileExplorerMenuC1";window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty();c.root.elemContainer.addEventListener("mouseup",m,!0);setTimeout(function(){document.body.addEventListener("mouseup",m,!1);document.body.addEventListener("touchend",
m,!1)},45)}function k(){t=!1;try{g.element.getElementsByClassName("editFolderItem")[0].removeAttribute("style"),g.element.getElementsByClassName("editFolderItem")[0].removeChild(q)}catch(A){}document.body.removeEventListener("mouseup",m,!1);document.body.removeEventListener("touchend",m,!1);c.root.elemContainer.removeEventListener("mouseup",m,!0)}function m(a){for(var b=q.children,c=!1,d=0;d<b.length;d++)if(a.target==b[d]){c=!0;break}c||a.target==q||k()}function e(a,b){var c=document.createElement("div");
c.className="fileExplorerMenuEntry";c.innerHTML=a;c.onclick=b;q.appendChild(c);return c}function f(a,b){if(c.params.onlyUniqueNames)for(var d=0;d<c.namesOfFiles.length;d++)if(c.namesOfFiles[d]==b)return!0;for(d=0;d<a.length;d++)if(a[d].name==b)return!0;return!1}var h=new n.init(c),t=!1,g,u=new r.init(d,l,c,a);a=document.createElement("button");a.className="fileOptionButton";a.innerHTML="Cancel";a.onclick=function(){g.element.style.opacity="1";c.draging=void 0;c.movingIndicator.style.display="none";
c.buttonCreateItems.style.display="block"};void 0!=c.movingIndicator&&c.movingIndicator.appendChild(a);a=document.createElement("button");a.className="fileOptionButton";a.innerHTML="Place";a.onclick=function(){g.element.style.opacity="1";c.draging=void 0;c.movingIndicator.style.display="none";var a=!0;void 0==c.selectedItem.content?(g.id==c.selectedItem.parent.id&&(a=!1),void 0!=c.selectedItem.parent.root&&void 0!=g.parent.root&&(a=!1)):(g.id==c.selectedItem.id&&(a=!1),void 0!=c.selectedItem.root&&
void 0!=g.parent.root&&(a=!1));var b=void 0==c.selectedItem.content?c.selectedItem.parent:c.selectedItem;for(var q=0;q<b.content.length;q++)if(b.content[q].name==g.name){a=!1;b.content[q].id!=g.id&&d.alert("Alert","There already exists an item with that name in target folder.");break}a&&h.moveItem(g,c.selectedItem,c);c.buttonCreateItems.style.display="block";c.movingIndicator.className="fileExplorerMI"};void 0!=c.movingIndicator&&c.movingIndicator.appendChild(a);var q=document.createElement("div");
q.className="fileExplorerMenu";e("Move",function(){q.getBoundingClientRect();k();g.element.style.opacity="0.36";c.mouseDrag=!1;c.draging=g;c.buttonCreateItems.style.display="none";c.movingIndicator.style.display="inline-block"});e("Rename",function(){k();d.prompt("Rename","Enter a new name: ","Name",function(a){null!=a&&(l.onRenameItem(g.name,g.id,a),g.name=a,g.element.getElementsByTagName("span")[0].innerHTML=a)})});e("Delete",function(){k();c.selectedItem=g;u["delete"](c)});var v=e("Duplicate",
function(){k();d.prompt("Copy","Enter a name for the copy: ",g.name,function(a){if(null!=a){a==g.name&&(a=g.name);for(var b=1,d=b+"_"+a;f(g.parent.content,d);)d=b+"_"+a,b++;c.selectedItem=g;l.sticker=g.image;l.createFile(d);l.onDuplicateFile(g.name,g.id,d,c.newlyCreatedFile.id)}})});e("Move up",function(){k();h.moveItemUp(g);l.onMoveItemUp(g.name,g.id)});e("Move down",function(){k();h.moveItemDown(g);l.onMoveItemDown(g.name,g.id)});this.open=function(a){void 0==c.draging&&(c.holding=!1,t&&k(),g=a,
b(),v.style.display="folder"==g.type?"none":"block")};this.closeMenu=function(){k()}}}}(x,w);var z=function(){return{init:function(){function r(a){n.style.top=a.clientY+"px";n.style.left=a.clientX+"px"}var n=document.createElement("div");n.className="fileExplorerGhost";var l=document.createElement("div");l.className="fileExplorerImagePreview";n.appendChild(l);var d=document.createElement("span");d.className="fileExplorerSpan";n.appendChild(d);var c=!1;this.createGhost=function(a){d.innerHTML=a.name;
n.style.width=a.element.offsetWidth+"px";"file"==a.type?(l.className="fileExplorerImagePreview fileExplorerContainBack",l.style.backgroundImage="url('"+a.element.getElementsByTagName("div")[0].src+"')"):"folder"==a.type&&(l.removeAttribute("style"),l.className="fileExplorerImagePreview fileExplorerContainBack fileExplorerFolderClosed");document.body.appendChild(n);document.body.addEventListener("mousemove",r);c=!0};this.killGhost=function(){c&&(c=!1,document.body.removeEventListener("mousemove",r),
document.body.removeChild(n))}}}}();w=function(r,n,l){return{init:function(d,c,a,b){function k(a,b){return void 0!=a.parent?a.parent.id==b.id?!0:k(a.parent,b):!1}function m(a){a.element.addEventListener("mousedown",function(c){c.stopPropagation();void 0==b.draging&&(b.holding=a.id,b.mouseDrag=!0)});a.element.addEventListener("mouseup",function(a){a.stopPropagation();b.holding=!1});a.element.addEventListener("mouseleave",function(c){!1!==b.holding&&void 0==b.draging&&b.mouseDrag&&(b.draging=b.hashedEntries[b.holding],
b.buttonCreateItems.style.display="none",g.createGhost(b.draging),u.closeMenu(),f(a,"fileExplorerItem"));b.holding=!1});a.element.addEventListener("mousemove",function(c){void 0!=b.draging&&b.mouseDrag?f(a,"fileExplorerDragLight"):b.selectedItem.id==a.id?f(a,"fileExplorerItemSelectedColor"):f(a,"fileExplorerItem")})}function e(a){void 0!=a&&void 0!=a.element&&f(a,"fileExplorerItem")}function f(a,b){"file"==a.type?a.element.className!=b&&(a.element.className=b):"folder"==a.type&&a.element.className!=
b&&(a.element.childNodes[0].className=b)}function h(a,b,c){a.addEventListener("mouseup",b,c);a.addEventListener("touchend",b,c)}var t=new n.init,g=new l.init,u=new r.init(c,a,b,d);d.elemContainer.addEventListener("mouseup",function(a){b.params.disableInteraction||(void 0!=b.draging&&1==b.mouseDrag&&t.moveItem(b.draging,d,b),b.draging=void 0,b.selectedItem=d,g.killGhost(),b.buttonCreateItems.style.display="block",d.elemContainer.className="fileExplorerRootCon")});this.addListenerFolder=function(a){var c=
"mouseup";("ontouchstart"in document.documentElement && false) &&(c="touchend");a.element.addEventListener(c,function(c){c.stopPropagation();void 0==b.draging||0==b.mouseDrag?(e(b.selectedItem),a.open?(a.open=!1,a.elemContainer.style.display="none",c=a.element.getElementsByTagName("div")[0],c.getElementsByTagName("div")[0].className="fileExplorerImagePreview fileExplorerFolderClosed fileExplorerContainBack",c.className="fileExplorerItem",b.selectedItem=d):(a.open=!0,a.elemContainer.style.display="block",c=a.element.getElementsByTagName("div")[0],
c.getElementsByTagName("div")[0].className="fileExplorerImagePreview fileExplorerFolderOpened fileExplorerContainBack",c.className="fileExplorerItemSelectedColor",b.selectedItem=void 0!=b.selectedItem?a:d)):(b.draging.id==a.id||k(a,b.draging)||t.moveItem(b.draging,a,b),f(a,"fileExplorerItem"),b.draging=void 0,b.selectedItem=d,g.killGhost(),b.buttonCreateItems.style.display="block")},!1);b.params.disableInteraction||m(a);void 0!=a.element.getElementsByClassName("editFolderItem")[0]&&h(a.element.getElementsByClassName("editFolderItem")[0],
function(b){b.stopPropagation();u.open(a)},!1)};this.addListenerToFile=function(a){var v="mouseup";("ontouchstart"in document.documentElement && false)&&(v="touchend");a.element.addEventListener(v,function(h){h.stopPropagation();b.holding=!1;void 0==b.draging||0==b.mouseDrag?(e(b.selectedItem),b.selectedItem.id==a.id&&void 0!=b.selectedItem?(b.selectedItem=d,a.element.className="fileExplorerItem"):(b.selectedItem=void 0!=b.selectedItem?a:d,c.onClickFile(a.name,a.id,a.image),a.element.className="fileExplorerItemSelectedColor",
b.selectedItem=a)):(b.draging.id==a.id||k(a,b.draging)||t.moveItem(b.draging,a,b),f(a,"fileExplorerItem"),b.draging=void 0,b.selectedItem=d,b.buttonCreateItems.style.display="block",g.killGhost())});b.params.disableInteraction||m(a);void 0!=a.element.getElementsByClassName("editFolderItem")[0]&&h(a.element.getElementsByClassName("editFolderItem")[0],function(b){b.stopPropagation();u.open(a)},!1)}}}}(x,w,z);y=function(r,n){return{init:function(l,d,c,a){function b(){this.id;this.type="folder";this.name=
"";this.open=!1;this.parent;this.content=[];this.elemContainer=document.createElement("div");this.image;this.element}function k(){this.id;this.type="file";this.name="";this.parent;this.contains=void 0;this.metaData=[];this.onclick=void 0;this.element;this.image=void 0}function m(b,c,f,g){"folder"==b?d.prompt("Create folder","Enter a name for the folder:","Folder name",function(h){if(null!=h&&""!=h.replace(/ /g,"")){var p=!1;if(a.params.onlyUniqueNames)for(var v=0;v<a.namesOfFolders.length;v++)if(a.namesOfFolders[v]==
h){p=!0;break}p?(p="An item with that name already exists",""==h.replace(/ /g,"")&&(p="Invalid name"),d.alert("Error",p,function(){f&&m(b,c,f,g)})):(e(h,!0),a.namesOfFolders.push(h))}else f&&m(b,c,f,g)}):d.prompt("Create "+a.params.itemName,"Enter a name:","File name",function(p){if(null!=p&&""!=p.replace(/ /g,"")){var e=!1;if(a.params.onlyUniqueNames)for(var v=0;v<a.namesOfFiles.length;v++)if(a.namesOfFiles[v]==p){e=!0;break}e?(e="An item with that name already exists",""==p.replace(/ /g,"")&&(e=
"Invalid name"),d.alert("Error",e,function(){f&&m(b,c,f,g)})):(h(p,!0),a.namesOfFiles.push(p))}else f&&m(b,c,f,g)})}function e(h,f){void 0==a.selectedItem&&(a.selectedItem=l);var p=new b;p.id=a.idCounter;p.name=h;p.parentContainer=a.selectedItem;p.element=q.createFolder(p);if(void 0==a.selectedItem.content){if(g(a.selectedItem.parent.content,h)&&f){d.alert("Alert","There already exists a folder with that name in target folder.");return}a.selectedItem.parent.content.push(p);p.parent=a.selectedItem.parent;
a.selectedItem.parent.elemContainer.appendChild(p.element)}else{if(g(a.selectedItem.content,h)&&f){d.alert("Alert","There already exists a folder with that name in target folder.");return}a.selectedItem.content.push(p);p.parent=a.selectedItem;a.selectedItem.elemContainer.appendChild(p.element)}a.idCounter++;u.addListenerFolder(p);for(var e=0;e<a.sharedResourceFolderJs.length;e++)void 0!=p.parent.root?a.sharedResourceFolderJs[e].selectItemFromReference(void 0):a.sharedResourceFolderJs[e].selectItemFromReference(a.sharedResourceFolderJs[e].getHashes()[p.parent.id]),
a.sharedResourceFolderJs[e].createFolder(h);if(f)c.onCreatedFileSuccess();a.hashedEntries[p.id]=p;a.namesOfFolders.push(p.name);return p}function f(b,e){if(null==b)d.prompt("Create file","Enter a name for the file:","File name",function(a){null!=a&&""!=a.replace(/ /g,"")&&f(a,e)});else if(void 0==a.selectedItem&&(a.selectedItem=l),e)if(null!=c.onCreateNewFile)c.onCreateNewFile(b,a.idCounter,function(){h(b,e)});else h(b,e);else h(b,e)}function h(b,h){var f=new k;f.image=c.sticker;f.id=a.idCounter;
f.name=b;f.contains=a.selectedItem;f.element=q.createFile(f);if(void 0==a.selectedItem.content){if(t(a.selectedItem.parent.content,b)&&h){d.alert("Alert","There already exists an item with that name in target folder.");return}a.selectedItem.parent.content.push(f);f.parent=a.selectedItem.parent;a.selectedItem.parent.elemContainer.appendChild(f.element)}else{if(t(a.selectedItem.content,b)&&h){d.alert("Alert","There already exists an item with that name in target folder.");return}a.selectedItem.content.push(f);
f.parent=a.selectedItem;a.selectedItem.elemContainer.appendChild(f.element)}if(h)c.onCreatedFileSuccess();a.idCounter++;u.addListenerToFile(f);for(var e=0;e<a.sharedResourceFolderJs.length;e++)void 0!=f.parent.root?a.sharedResourceFolderJs[e].selectItemFromReference(void 0):a.sharedResourceFolderJs[e].selectItemFromReference(a.sharedResourceFolderJs[e].getHashes()[f.parent.id]),a.sharedResourceFolderJs[e].sticker=c.sticker,a.sharedResourceFolderJs[e].createFile(b);c.sticker=void 0;a.hashedEntries[f.id]=
f;a.namesOfFiles.push(f.name);a.newlyCreatedFile=f}function t(b,c){if(a.params.onlyUniqueNames)for(var f=0;f<a.namesOfFiles.length;f++)if(a.namesOfFiles[f]==c)return!0;for(f=0;f<b.length;f++)if(b[f].name==c)return!0;return!1}function g(b,c){if(a.params.onlyUniqueNames)for(var f=0;f<a.namesOfFolders.length;f++)if(a.namesOfFolders[f]==c)return!0;for(f=0;f<b.length;f++)if(b[f].name==c)return!0;return!1}var u=new n.init(l,c,d,a),q=new r.init(l,a);this.createFolder=function(a){return e(a,!1)};this.createFile=
function(a,b){f(a,b)};this.userCreateItem=function(a,b,c,f){m(a,b,c,f)}}}}(y,w);w=function(){return{init:function(){function r(b,f,e,k){document.body.appendChild(m);a();g.value=e;g.style.display="block";q.style.display="inline";h.innerHTML=b;t.innerHTML=f;u.innerHTML="Okay";q.innerHTML="Cancel";u.onclick=function(){n()};q.onclick=function(){d(function(){document.body.removeChild(m);void 0!=k&&k(null)})};c();setTimeout(function(){var a=document.getElementById("inputTextPrompt");a.setSelectionRange(0,
a.value.length);a.focus()},25)}function n(){d(function(){document.body.removeChild(m);if(void 0!=k){k(g.value);for(var a=0;a<b.length;a++)b[a]()}})}function l(b,f,e){document.body.appendChild(m);a();g.style.display="none";q.style.display="inline";h.innerHTML=b;t.innerHTML=f;u.innerHTML="Yes";q.innerHTML="No";u.onclick=function(){d(function(){document.body.removeChild(m);e(!0)})};q.onclick=function(){d(function(){document.body.removeChild(m);e(!1)})};c()}function d(a){e.style.transition="top 0.4s";
e.style.top="-"+e.clientHeight+"px";m.style.opacity="0";setTimeout(function(){a()},400)}function c(){e.style.transition="top 0.4s";setTimeout(function(){e.style.top="0px"},50)}function a(){e.style.transition="";e.style.top="-"+e.clientHeight+"px";m.style.transition="opacity 0.5s";m.style.opacity="1"}var b=[],k,m=document.createElement("div");m.className="fileExplorerPromptBackdrop";var e=document.createElement("div");e.className="fileExplorerPromptTopColor";var f=document.createElement("div");f.className=
"fileExplorerPromptContainer";var h=document.createElement("h2");h.className="fileExplorerPromptHeader";var t=document.createElement("p");t.className="fileExplorerPromptPara";var g=document.createElement("input");g.id="inputTextPrompt";g.type="text";g.className="fileExplorerParaInputText";var u=document.createElement("button");u.className="fileOptionButton";var q=document.createElement("button");q.className="fileOptionButton";q.style["float"]="right";f.appendChild(h);f.appendChild(t);f.appendChild(g);
f.appendChild(u);f.appendChild(q);e.appendChild(f);m.appendChild(e);this.setFunctionExecOnComplete=function(a){b.push(a)};this.prompt=function(a,b,c,f){k=f;void 0==f?r("",a,b,c):r(a,b,c,f)};g.addEventListener("keyup",function(a){13==(a.keyCode?a.keyCode:a.which)&&n()},!1);this.alert=function(b,f,e){document.body.appendChild(m);a();g.style.display="none";q.style.display="none";void 0==f?(h.innerHTML="Error:",t.innerHTML=b):(h.innerHTML=b,t.innerHTML=f);u.innerHTML="Okay";q.innerHTML="Cancel";u.onclick=
function(){d(function(){document.body.removeChild(m);void 0!=e&&e()})};q.onclick=function(){};c()};this.confirm=function(a,b,c){void 0==c?l("",a,b):l(a,b,c)}}}}();x=function(){return{init:function(r,n,l){this.parseMetaData=function(d,c){for(var a=0;a<c.length;a++)if("folder"==c[a].type){n.selectedItem=d;var b=l.createFolder(c[a].name);n.namesOfFolders.push(c[a].name);this.parseMetaData(b,c[a].contains)}else"file"==c[a].type&&(n.selectedItem=d,n.namesOfFiles.push(c[a].name),r.sticker=c[a].image,l.createFile(c[a].name))};
this.selectFile=function(d,c){for(var a=0;a<d.length;a++)if("folder"==d[a].type)selectFile(d[a].contains,c);else if("file"==d[a].type)if("string"==typeof c){if(d[a].name==c){n.selectedItem=d[a];break}}else if("number"==typeof c&&d[a].id==c){n.selectedItem=d[a];break}};this.checkForName=function(d,c,a){for(var b=0;b<d.length;b++){if("folder"==d[b].type)return this.checkForName(d[b].contains,c,a);if("file"==d[b].type){if(c.v===a)return d[b].name;c.v++}}return 0};this.parseContentToMeta=function(d,c){for(var a=
0;a<c.length;a++){if("folder"==c[a].type){var b={type:c[a].type,name:c[a].name,contains:[],id:c[a].id};this.parseContentToMeta(b.contains,c[a].content)}else"file"==c[a].type&&(b=void 0,void 0!=c[a].image&&(b=c[a].element.getElementsByTagName("img")[0].src),b={type:c[a].type,name:c[a].name,id:c[a].id,image:b});d.push(b)}};this.appendTopBarContainer=function(d,c,a,b){var k=document.createElement("div");k.className="fileExplorerTopCon";c&&(b.buttonCreateItems=document.createElement("div"),b.buttonCreateItems.style.textAlign=
"center",b.buttonCreateItems.style.width="100%",c=document.createElement("button"),c.className="fileOptionButton fileOptionCreateFile",c.innerHTML="Create "+a,c.addEventListener("mouseup",function(){r.createFile(null,!0)}),b.buttonCreateItems.appendChild(c),a=document.createElement("button"),a.className="fileOptionButton fileOptionCreateFolder",a.innerHTML="Create folder",a.addEventListener("mouseup",function(){l.userCreateItem("folder")}),b.buttonCreateItems.appendChild(a),k.appendChild(b.buttonCreateItems));
b.movingIndicator.className="fileExplorerMI";k.appendChild(b.movingIndicator);d.appendChild(k)}}}}();return function(r,n,l){return{init:function(){function d(){for(var b=c.elemContainer;b.firstChild;)b.removeChild(b.firstChild);a.idCounter=0;c.content.length=0;a.namesOfFolders.length=0;a.namesOfFiles.length=0;a.hashedEntries.length=0}var c={root:!0,content:[],elemContainer:document.createElement("div")};c.elemContainer.className="fileExplorerRootCon";var a={selectedItem:c,sharedResourceFolderJs:[],
hashedEntries:[],movingIndicator:document.createElement("div"),buttonCreateItems:void 0,root:c,draging:void 0,holding:!1,mouseDrag:!1,idCounter:0,params:void 0,namesOfFolders:[],namesOfFiles:[],newlyCreatedFile:void 0},b=new n.init,k={thisMainContainer:void 0,getHashes:function(){return a.hashedEntries},setSharedResources:function(b){a.sharedResourceFolderJs.push(b)},getRoot:function(){return c},selectItemFromReference:function(b){a.selectedItem=b},setIdCounter:function(b){a.idCounter=b},reset:function(){d()},
sticker:void 0,updateFileImage:function(b,c){if(void 0!=a.hashedEntries[b]){if("file"==a.hashedEntries[b].type){a.hashedEntries[b].element.getElementsByTagName("img")[0].src=c;a.hashedEntries[b].image=c;for(var f=0;f<a.sharedResourceFolderJs.length;f++)a.sharedResourceFolderJs[f].getHashes()[b].element.getElementsByTagName("img")[0].src=c,a.sharedResourceFolderJs[f].getHashes()[b].image=c}k.sticker=void 0}},getNameAtPosition:function(a){return e.checkForName(c,{v:0},a)},insertData:function(a){0!=
a.length&&""!=a.replace(/ /g,"")&&(a=JSON.parse(a),e.parseMetaData(c,a))},getStructure:function(a){var b=[];e.parseContentToMeta(b,c.content);return!0===a?JSON.stringify(b):b},createFolder:function(a){return m.createFolder(a)},createFile:function(a,b){m.createFile(a,b)},selectItem:function(a,b){void 0!=a?e.selectFile(c,a):void 0!=b&&e.selectFile(c,b)},flush:function(b){d();for(b=0;b<a.sharedResourceFolderJs.length;b++)a.sharedResourceFolderJs[b].reset()},prompt:function(a,c,d,e){b.prompt(a,c,d,e)},
alert:function(a,c,d){b.alert(a,c,d)},confirm:function(a,c,d){b.confirm(a,c,d)},onCreatedFileSuccess:function(){},onMoveItemUp:function(a,b){},onMoveItemDown:function(a,b){},onDuplicateFile:function(a,b,c,d){},onClickFile:function(a,b,c){},onCreateNewFile:null,onRenameItem:function(a,b,c){},onDeleteFile:function(a,b){}},m=new r.init(c,b,k,a),e=new l.init(k,a,m);this.getInit=function(b,d){d.itemName=void 0==d.itemName?"File":d.itemName;d.disableInteraction=void 0==d.disableInteraction?!1:d.disableInteraction;
d.onlyUniqueNames=void 0==d.onlyUniqueNames?!1:d.onlyUniqueNames;d.createItemButtonOn=void 0==d.createItemButtonOn?!1:d.createItemButtonOn;d.mirror=void 0==d.mirror?null:d.mirror;null!=d.mirror&&(0==d.mirror.getRoot().content.length?(d.disableInteraction=!0,d.onlyUniqueNames=!1,d.createItemButtonOn=!1):(d.mirror=null,console.log("Both file explorers must be empty before they can be connected through mirroring.")));a.params=d;void 0!=b?"string"==typeof b&&(b=document.getElementById(b)):b=document.createElement("div");
var f=document.createElement("div");f.className="fileExplorerItemContainer fileExplorerSize";b.className="fileExplorerContainer fileExplorerImage";d.disableInteraction||e.appendTopBarContainer(b,d.createItemButtonOn,d.itemName,a);b.appendChild(f);f.appendChild(c.elemContainer);null!=d.mirror&&d.mirror.setSharedResources(k);return k}}}}(y,w,x)}();